<root main_tree_to_execute="MainTree">
  <BehaviorTree ID="MainTree">
    <Sequence>
      <ControllerService service_name="/auv3/controller" enable="true"/>
      <SetBlackboard output_key="pose_topic_name" value="/auv3/nav/odom_ned"/
      <ReactiveFallback>
        <IsTimeExpired seconds="10"/>
        <NavigateToPose server_name="/auv3/LocomotionServer" goal="0;0;0.8;0" relative="true"/>
      </ReactiveFallback>

      <UpdatePose topic_name="{pose_topic_name}" result="{odom_pose}"/>
      <ConvertOdomToPose odom_pose="{odom_pose}" pose="{pose}" />
      
      <ReactiveSequence>
        <UpdatePose topic_name="{pose_topic_name}" result="{odom_pose}"/>
        <ConvertOdomToPose odom_pose="{odom_pose}" pose="{pose}" />
        <NavigateToPose server_name="/auv3/LocomotionServer" goal="2;0;0.8;0" relative="true"/>
        <NavigateToPose server_name="/auv3/LocomotionServer" goal="0;1;0.8;0" relative="true"/>
        <NavigateToPose server_name="/auv3/LocomotionServer" goal="2;0;0.8;0" relative="true"/>
        <Repeat num_cycles="4">
          <NavigateToPose server_name="/auv3/LocomotionServer" goal="0;0;0.8;90" relative="true"/>
        </Repeat>
      </ReactiveSequence>
      <ControllerService service_name="/auv3/controller" enable="false" />
    </Sequence>
  </BehaviorTree>

</root>
